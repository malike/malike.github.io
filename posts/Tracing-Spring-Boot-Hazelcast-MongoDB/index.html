<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Tracing Spring Boot Hazelcast and MongoDB" /><meta name="author" content="Malike St Lewis" /><meta property="og:locale" content="en" /><meta name="description" content="1. Hazelcast" /><meta property="og:description" content="1. Hazelcast" /><link rel="canonical" href="/posts/Tracing-Spring-Boot-Hazelcast-MongoDB/" /><meta property="og:url" content="/posts/Tracing-Spring-Boot-Hazelcast-MongoDB/" /><meta property="og:site_name" content="Malike St" /><meta property="og:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert-19960228.gif" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:image:alt" content="hazelcast mongodb." /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-12-20T00:00:00+01:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert-19960228.gif" /><meta name="twitter:image:alt" content="hazelcast mongodb." /><meta property="twitter:title" content="Tracing Spring Boot Hazelcast and MongoDB" /><meta name="twitter:site" content="@malike_st" /><meta name="twitter:creator" content="@malike_st" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Malike St Lewis","url":"https://github.com/malike/"},"dateModified":"2018-12-20T00:00:00+01:00","datePublished":"2018-12-20T00:00:00+01:00","description":"1. Hazelcast","headline":"Tracing Spring Boot Hazelcast and MongoDB","image":{"width":800,"height":500,"alt":"hazelcast mongodb.","url":"/posts/dilbert-19960228.gif","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"/posts/Tracing-Spring-Boot-Hazelcast-MongoDB/"},"url":"/posts/Tracing-Spring-Boot-Hazelcast-MongoDB/"}</script><title>Tracing Spring Boot Hazelcast and MongoDB | Malike St</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Malike St"><meta name="application-name" content="Malike St"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/malike/malike-media/main/common/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Malike St</a></div><div class="site-subtitle font-italic">Tech & stuff</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/sre/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SRE</span> </a><li class="nav-item"> <a href="/distributed/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>DISTRIBUTED SYSTEMS</span> </a><li class="nav-item"> <a href="/electronics/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ELECTRONICS</span> </a><li class="nav-item"> <a href="/oss/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>OS PROJECTS I STARTED</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/malike" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://gitlab.com/malike" aria-label="gitlab" target="_blank" rel="noopener"> <i class="fab fa-gitlab"></i> </a> <a href="https://twitter.com/malike_st" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['st.malike','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Tracing Spring Boot Hazelcast and MongoDB</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Tracing Spring Boot Hazelcast and MongoDB</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1545260400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 20, 2018 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert-19960228.gif" class="preview-img bg" alt="hazelcast mongodb." width="800" height="500" data-proofer-ignore><figcaption class="pt-2 pb-2">hazelcast mongodb.</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/malike/">Malike St Lewis</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="641 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><h3 id="1-hazelcast"><span class="mr-2">1. <a href="https://hazelcast.org/"><span class="mr-2">Hazelcast</a></span><a href="#1-hazelcast" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Hazelcast is an in-memory data grid (IMDG). In-memory data grids are distributed stores which rely primarily on the RAM for storage across a cluster for better performance. This makes IMDG’s very good caches, managing sessions across microservices, real time monitoring and so on.</p><p>An IMDG like Hazelcast, augments the core DB no matter what software it is. This reduces round trips to the the database to have better performance. This can also work as layer before APIs as well.Hazelcast is also distributed, this makes it a right fit for microservice architectures.</p><h3 id="2-tracing-and-hazelcast-and-mongodb"><span class="mr-2">2. Tracing and Hazelcast and MongoDB</span><a href="#2-tracing-and-hazelcast-and-mongodb" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In <a href="https://malike.github.io/Distributed-Tracing-With-Spring-Cloud-Sleuth-And-Opencensus.html">previous post</a> I explained what distributed tracing is and how to do it with Opencensus, ELK and Spring Sleuth.</p><p>To make a case why we need an IMDG like Hazelcast, I thought it be easier to to trace simple write and read requests to both Hazelcast and MongoDB.</p><p>Setting up <a href="https://github.com/malike/spring-boot-mongodb-hazelcast-tracing/tree/master/zipkin-server">Zipkin</a> to run on port <code class="language-plaintext highlighter-rouge">9411</code>.</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/zipkin-trace-hazelcast-mongodb.png" alt="zipkin" data-proofer-ignore></p><p>Now to set up a simple Spring Boot project to use Hazelcast we need to add these dependencies</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.hazelcast<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>hazelcast<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.hazelcast<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>hazelcast-spring<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></table></code></div></div><p>Add our configuration file help us connect to Hazelcast.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HazelcastConfiguration</span> <span class="o">{</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">Config</span> <span class="nf">hazelCastConfig</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">Config</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Config</span><span class="o">();</span>
    <span class="n">config</span><span class="o">.</span><span class="na">setInstanceName</span><span class="o">(</span><span class="s">"hazelcast-instance"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">addMapConfig</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">MapConfig</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"configuration"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setMaxSizeConfig</span><span class="o">(</span>
                    <span class="k">new</span> <span class="nf">MaxSizeConfig</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span> <span class="nc">MaxSizeConfig</span><span class="o">.</span><span class="na">MaxSizePolicy</span><span class="o">.</span><span class="na">FREE_HEAP_SIZE</span><span class="o">))</span>
                <span class="o">.</span><span class="na">setEvictionPolicy</span><span class="o">(</span><span class="nc">EvictionPolicy</span><span class="o">.</span><span class="na">LRU</span><span class="o">)</span> <span class="c1">//least recently used</span>
                <span class="o">.</span><span class="na">setTimeToLiveSeconds</span><span class="o">(-</span><span class="mi">1</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Once configured we can <code class="language-plaintext highlighter-rouge">autowire</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">HazelcastInstance</span> <span class="n">hazelcastInstance</span><span class="o">;</span>
</pre></table></code></div></div><p>and use it to write and read from Hazelcast.</p><p>Now to configure a simple <a href="https://github.com/malike/spring-boot-mongodb-hazelcast-tracing/tree/master/spring-cloud-mongodb">spring boot mongodb</a> app :</p><p>Now to configure our traces we simply have to add this, obviously with different names for <code class="language-plaintext highlighter-rouge">spring.application.name</code> so we can distinguish between the two.</p><div class="language-properties highlighter-rouge"><div class="code-header"> <span data-label-text="Properties"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="py">spring.application.name</span><span class="p">=</span><span class="s">spring-cloud-hazelcast</span>
<span class="py">spring.zipkin.baseUrl</span><span class="p">=</span><span class="s">http://localhost:9411</span>
<span class="py">spring.sleuth.sampler.probability</span><span class="p">=</span><span class="s">1.0</span>
</pre></table></code></div></div><p>and</p><div class="language-properties highlighter-rouge"><div class="code-header"> <span data-label-text="Properties"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="py">spring.application.name</span><span class="p">=</span><span class="s">spring-cloud-mongodb</span>
<span class="py">spring.zipkin.baseUrl</span><span class="p">=</span><span class="s">http://localhost:9411</span>
<span class="py">spring.sleuth.sampler.probability</span><span class="p">=</span><span class="s">1.0</span>
</pre></table></code></div></div><h3 id="3-comparing-hazelcast-and-mongodb"><span class="mr-2">3. Comparing Hazelcast and MongoDB</span><a href="#3-comparing-hazelcast-and-mongodb" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We can access the write and read API for both Hazelcast and MongoDB with a simple curl request</p><p>For mongodb:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>curl <span class="nt">-X</span> POST <span class="se">\</span>
  http://localhost:8181/mongodb/api/write/1 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{"type":"testing","to":"st.malike@gmail.com","idField":1}'</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>curl <span class="nt">-X</span> POST <span class="se">\</span>
  http://localhost:8181/mongodb/api/read/1 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{"type":"testing","to":"st.malike@gmail.com","idField":1}'</span>
</pre></table></code></div></div><p>and Hazelcast</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre> curl <span class="nt">-X</span> POST <span class="se">\</span>
  http://localhost:8080/hazelcast/api/write/1 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{"type":"testing","to":"st.malike@gmail.com","idField":1}'</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>curl <span class="nt">-X</span> POST <span class="se">\</span>
  http://localhost:8080/hazelcast/api/read/1 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\ </span> 
  <span class="nt">-d</span> <span class="s1">'{"type":"testing","to":"st.malike@gmail.com","idField":1}'</span>
</pre></table></code></div></div><p>Now we can head over to Zipkin to verify the results.</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/hazelcast-write.png" alt="zipkin hazelcast write" data-proofer-ignore></p><h6 id="hazelcast-write-took--3431-ms"><center>Hazelcast Write took : **3.431 ms**</center></h6><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/mongodb-write.png" alt="zipkin mongodb write " data-proofer-ignore></p><h6 id="mongodb-write-took--417952-ms"><center>MongoDB Write took : **417.952 ms**</center></h6><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/hazelcast-read.png" alt="zipkin hazelcast read" data-proofer-ignore></p><h6 id="hazelcast-read-took--2218-ms-"><center>Hazelcast Read took : **2.218 ms** </center></h6><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/mongodb-read.png" alt="zipkin mongodb read" data-proofer-ignore></p><h6 id="mongodb-read-took--107486-ms"><center>MongoDB Read took : **107.486 ms**</center></h6><p>As you can see the difference is quite clear.</p><h3 id="4-use-cases-for-hazelcast"><span class="mr-2">4. Use Cases for Hazelcast</span><a href="#4-use-cases-for-hazelcast" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h3 id="caching"><span class="mr-2">Caching</span><a href="#caching" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Hazelcast has faster reads which makes it a good candidate for a cache. This architecture requires putting Hazelcast before a database or an API with immutable response. By providing in-memory access cache data, performance of the systems designed with Hazelcast will improve significantly.</p><h3 id="speed-layer-of-lambda-architecture-and-olap-store"><span class="mr-2">Speed Layer of Lambda Architecture and OLAP store</span><a href="#speed-layer-of-lambda-architecture-and-olap-store" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Hazelcast can be used as the foundation of the speed layer of a <a href="https://malike.github.io/Lambda-Architecture-RT.html">Lambda System</a>. The speed layer computes functions over recent data with low latency and mutates your real-time data stores directly. This can be used for real time analysis due to the fact that large volumes of data can easily be accessible from an in-memory grid of data fast for real time or near real-time analysis.</p><p>This could also serve as a good store to build an OLAP unit on top of.</p><p>These are just some of the few use cases for Hazelcast, you can find other use cases <a href="https://hazelcast.org/">here</a> as well.</p><blockquote><p>Source code also available on <a href="https://github.com/malike/spring-boot-mongodb-hazelcast-tracing">github</a></p></blockquote><h3 id="references"><span class="mr-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://blog.hazelcast.com/">https://blog.hazelcast.com/</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tech/'>tech</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/tracing/" class="post-tag no-text-decoration" >tracing</a> <a href="/tags/sleuth/" class="post-tag no-text-decoration" >sleuth</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Tracing+Spring+Boot+Hazelcast+and+MongoDB+-+Malike+St&url=%2Fposts%2FTracing-Spring-Boot-Hazelcast-MongoDB%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Tracing+Spring+Boot+Hazelcast+and+MongoDB+-+Malike+St&u=%2Fposts%2FTracing-Spring-Boot-Hazelcast-MongoDB%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FTracing-Spring-Boot-Hazelcast-MongoDB%2F&text=Tracing+Spring+Boot+Hazelcast+and+MongoDB+-+Malike+St" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Predicting-Customer-Purchases-Beginners-Guide/">Predicting Customer Purchases: A Beginner's Guide to E-Commerce Data Science</a><li><a href="/posts/Obersevability-Stack-with-Grafana-Loki-And-Tempo/">Observability Stack with Grafana Loki Tempo and Prometheus</a><li><a href="/posts/Apache-Kafka-On-Kubernetes-Strimzi-Operator/">Apache Kafka on Kubernetes with Strimzi Operator</a><li><a href="/posts/Annotations+Spring=Awesome/">Java Annotations + Spring = Awesome</a><li><a href="/posts/Lambda-Architecture-RT/">Lambda Architecture With Kafka, ElasticSearch, Apache Storm and MongoDB</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Distributed-Tracing-With-Spring-Cloud-Sleuth-And-Opencensus/"><div class="card-body"> <em class="small" data-ts="1523224800" data-df="ll" > Apr 9, 2018 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Distributed Tracing with Spring Cloud Sleuth and Opencensus</h3><div class="text-muted small"><p> 1. What’s Distributed Tracing? Assume you’ve designed your application using a microservice architecture and for a feature like signup you have: a. service that creates the user in the database,...</p></div></div></a></div><div class="card"> <a href="/posts/Annotations+Spring=Awesome/"><div class="card-body"> <em class="small" data-ts="1440194400" data-df="ll" > Aug 22, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java Annotations + Spring = Awesome</h3><div class="text-muted small"><p> Java Annotations are really cool. They give this feature to send extra information that can be used during runtime and/or compile time. I don’t need to talk about Spring here. I personally think i...</p></div></div></a></div><div class="card"> <a href="/posts/Spring-Metrics/"><div class="card-body"> <em class="small" data-ts="1440453600" data-df="ll" > Aug 25, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spring Metrics For Simple Event Monitoring</h3><div class="text-muted small"><p> Sometimes (or all the time) you would want to know whats happening in your application’s life cycle. Spring Boot Metrics is just the right tool for application metrics in any Spring Boot Applicatio...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/K8s-101-And-Istio-Service-Mesh/" class="btn btn-outline-primary" prompt="Older"><p>Beginning Kubernetes and Istio Service Mesh for Cloud Native/Distributed Systems</p></a> <a href="/posts/CI-CD-AWS-Infrastructure-For-Kubernetes-Cluster-Using-CloudFormation/" class="btn btn-outline-primary" prompt="Newer"><p>Continuous Integration, continuous Deployment with AWS Using EKS, CodeBuild, CodePipeline, ECR and CloudFormation</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/malike_st">Malike St</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-66835539-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-66835539-1'); }); </script>
