<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Configuration Management for Microservices" /><meta name="author" content="Malike St Lewis" /><meta property="og:locale" content="en" /><meta name="description" content="Centralized configuration management is one of the major requirements in a microservice system. Although one of the major proponents of a microservice system is decentralized services, certain parts still need to be centralized to ease deployment pains. Centralized configuration is simply a main location where all microservices can pick their specific configurations to help them run perfectly." /><meta property="og:description" content="Centralized configuration management is one of the major requirements in a microservice system. Although one of the major proponents of a microservice system is decentralized services, certain parts still need to be centralized to ease deployment pains. Centralized configuration is simply a main location where all microservices can pick their specific configurations to help them run perfectly." /><link rel="canonical" href="/posts/Configuration-Management-For-Microservices-And-Distributed-Systems/" /><meta property="og:url" content="/posts/Configuration-Management-For-Microservices-And-Distributed-Systems/" /><meta property="og:site_name" content="Malike St" /><meta property="og:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert-cartoon.jpg" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-06-02T00:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert-cartoon.jpg" /><meta property="twitter:title" content="Configuration Management for Microservices" /><meta name="twitter:site" content="@malike_st" /><meta name="twitter:creator" content="@malike_st" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Malike St Lewis","url":"https://github.com/malike/"},"dateModified":"2022-09-16T20:31:41+02:00","datePublished":"2018-06-02T00:00:00+02:00","description":"Centralized configuration management is one of the major requirements in a microservice system. Although one of the major proponents of a microservice system is decentralized services, certain parts still need to be centralized to ease deployment pains. Centralized configuration is simply a main location where all microservices can pick their specific configurations to help them run perfectly.","headline":"Configuration Management for Microservices","image":{"width":800,"height":500,"url":"/posts/dilbert-cartoon.jpg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"/posts/Configuration-Management-For-Microservices-And-Distributed-Systems/"},"url":"/posts/Configuration-Management-For-Microservices-And-Distributed-Systems/"}</script><title>Configuration Management for Microservices | Malike St</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Malike St"><meta name="application-name" content="Malike St"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/malike/malike-media/main/common/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Malike St</a></div><div class="site-subtitle font-italic">Tech & stuff</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/sre/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SRE</span> </a><li class="nav-item"> <a href="/distributed/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>DISTRIBUTED SYSTEMS</span> </a><li class="nav-item"> <a href="/electronics/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ELECTRONICS</span> </a><li class="nav-item"> <a href="/oss/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>OS PROJECTS I STARTED</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/malike" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://gitlab.com/malike" aria-label="gitlab" target="_blank" rel="noopener"> <i class="fab fa-gitlab"></i> </a> <a href="https://twitter.com/malike_st" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['st.malike','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Configuration Management for Microservices</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Configuration Management for Microservices</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1527890400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 2, 2018 </em> </span> <span> Updated <em class="" data-ts="1663353101" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 16, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert-cartoon.jpg" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/malike/">Malike St Lewis</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1351 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><p>Centralized configuration management is one of the major requirements in a microservice system. Although one of the major proponents of a microservice system is decentralized services, certain parts still need to be centralized to ease deployment pains. Centralized configuration is simply a main <em>location</em> where all microservices can <em>pick</em> their specific configurations to help them run perfectly.</p><p>Some of the well known options are :</p><h5 id="1-etcd"><span class="mr-2">1. <a href="https://github.com/coreos/etcd"><span class="mr-2">etcd</a></span><a href="#1-etcd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><em>“etcd is a distributed reliable key-value store for the most critical data of a distributed system, with a focus on being:</em></p><p><em>Simple: well-defined, user-facing API (gRPC)</em> <em>Secure: automatic TLS with optional client cert authentication</em> <em>Fast: benchmarked 10,000 writes/sec</em> <em>Reliable: properly distributed using Raft”</em></p><p>When researching on using etcd as config server, I came across these resources <a href="https://github.com/Redpill-Linpro/spring-config-etcd">this, implemented in java</a> and <a href="https://www.compose.com/articles/building-a-dynamic-configuration-service-with-etcd-and-python/">also this in python </a>.</p><h5 id="2-zookeeper"><span class="mr-2">2. <a href="https://zookeeper.apache.org/"><span class="mr-2">Zookeeper</a></span><a href="#2-zookeeper" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><em>“ZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services. All of these kinds of services are used in some form or another by distributed applications”</em></p><p>This is supported in <a href="http://cloud.spring.io/spring-cloud-zookeeper/">Spring</a>. If you use Apache Kafka, you’ll know how it relies on Zookeeper’s high availability and fault tolerant for storing and retrieval of K,V pair of topic and consumer configurations.</p><p>I found <a href="https://mmcgrana.github.io/2014/05/getting-started-with-zookeeper-and-go.html">this</a> when researching on using Zookeeper with Go. It’s quite old but with very good explanation.</p><p>Netflix’s <a href="https://curator.apache.org/">Apache Curator</a> is java client for Zookeeper which extremely helpful with especially when not using the Spring stack.</p><h5 id="3-consul"><span class="mr-2">3. <a href="https://consul.io/"><span class="mr-2">Consul</a></span><a href="#3-consul" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p>Consul is not just a <em>K,V</em> store, one underlying principle of Config Servers. It has <code class="language-plaintext highlighter-rouge">Service Discovery</code>, <code class="language-plaintext highlighter-rouge">Service Health Monitoring</code> as well as other functionalities which makes it the preferred choice. With it’s well documented <a href="https://www.consul.io/api/libraries-and-sdks.html">apis and sdks</a> with examples in different languages and frameworks it would be the best option. But the simplicity of the next option is what makes this post not about Consul.</p></br></br><p>…and finally <strong>4. <a href="https://cloud.spring.io/spring-cloud-config/">Spring Cloud Config</a></strong></p><p>Since this post is about Spring Cloud Config, let’s dive in :</p><p>It’s best to explain <a href="https://github.com/malike/centralized-configuration-mangement.git">codes</a>, if you follow the link you’ll see a project where by a <code class="language-plaintext highlighter-rouge">golang</code> and a <code class="language-plaintext highlighter-rouge">java</code> application worked with a Spring Cloud Config to retrieve configurations. The golang project is an already existing project <a href="https://github.com/malike/go-kafka-alert">go-kafka-alert</a>.</p><p><strong>1. Manual Configuration Refresh</strong></p><p>Aside from just serving as a K,V store to store and retrieve configurations, a Config Server should have in place systems to help update or refresh configurations in services after updates. In a Spring Boot/Cloud application connecting to a config server,this can be achieved by doing the following:</p><p>a. Location of config Server, by adding this to property file. This informs the Spring Boot/Cloud application to override default properties by checking the Config Server for properties.</p><p><code class="language-plaintext highlighter-rouge">spring.cloud.config.uri=http://localhost:8888</code></p><p>It uses this convention <code class="language-plaintext highlighter-rouge">http://localhost:8888/{spring.application.name}-{profile}.yml</code>. Where <code class="language-plaintext highlighter-rouge">spring.application.name</code> is the name of the service configured in your spring application.</p><p>b. Secondly using <code class="language-plaintext highlighter-rouge">@RefreshScope</code> annotation to distinguish properties to be updated after refresh and those that should not. In our sample application</p><p>c. Lastly Hit the <code class="language-plaintext highlighter-rouge">/refresh</code> endpoint of the service for our service to reload the new configurations.</p><p><em>NB: You’ll need <code class="language-plaintext highlighter-rouge">org.springframework.boot:spring-boot-starter-actuator</code> as part of your project to expose the refresh endpoint</em></p><p>How would you replicate a similar thing in a Golang application,</p><p><strong>2. Automatic Configuration Refresh</strong></p><p>We’ve seen how the manual configuration update works. But it could be better to not involve manual processes. One advantage of this is,it reduces the amount of work to done with after configuration updated and also helps us use Spring Cloud Config in microservices or distributed systems not written using the Spring stack.</p><p>This would require a messaging queue,<code class="language-plaintext highlighter-rouge">Apache Kafka</code> or <code class="language-plaintext highlighter-rouge">RabbitMQ</code>. <code class="language-plaintext highlighter-rouge">Redis</code> is also a supported by Spring Cloud Config. It also requires a git webhook in <code class="language-plaintext highlighter-rouge">Github</code>,<code class="language-plaintext highlighter-rouge">Bitbucket</code> or <code class="language-plaintext highlighter-rouge">Gitlab</code> to tell the config server if any change is pushed, that is for configuration files hosted on <code class="language-plaintext highlighter-rouge">Git</code>. The messaging queue enables services subscribed to <em>see</em> the configurations files updated.</p><p>To get this working we’ll need to add dependencies for <code class="language-plaintext highlighter-rouge">spring-cloud-config-monitor</code> and <code class="language-plaintext highlighter-rouge">spring-cloud-starter-bus-kafka</code>( you can use either redis or rabbit bus dependency)</p><p><code class="language-plaintext highlighter-rouge">spring-cloud-config-monitor</code> enables the end point <code class="language-plaintext highlighter-rouge">/monitor</code> in our config server which we can then add as webhook to our configuration repository</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/config-webhook.png" alt="_config.yml" data-proofer-ignore> <span style="font-size:13px;">NB: Although this image shows how-to in github,it can also be done in gitlab and bitbucket</span></p><p>Anytime there’s a change in this repo it’s pushed to the Config Server. For configuration file stored on the file system Spring Cloud Config automatically picks the changes so you won’t require any webhook.</p><p>A sample Cloud Bus configuration in Spring Config Server, detailing where it should pick the configuration as well Kafka configuration to push events to.</p><pre><code class="yml">
    spring:
        application:
            name: config-server
        cloud:
            config:
            server:
                monitor:
                github:
                    enabled: true
                health:
                enabled: true
                git:
                uri: https://github.com/malike/centralized-configuration.git
                force-pull: true
                username: username
                password: password
            bus:
            enabled: true
            refresh:
                enabled: true
            stream:
            kafka:
                binder:
                zkNodes: localhost:2181
                brokers: localhost:9092
</code></pre><p>If our service is a Spring Boot/Cloud application we would need just <a href="">one other configuration</a> for it to work out of the box but for a <code class="language-plaintext highlighter-rouge">Go</code> (or a non Spring Boot/Cloud ) application also using the Config Server we’ll need to be subscribed to the topic <code class="language-plaintext highlighter-rouge">springCloudBus</code> and update the config anytime there’s an update the configuration file in used.</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/springCloudBus-ConfigUpdate.png" alt="_config.yml" data-proofer-ignore> <span style="font-size:13px;">sample message from in kafka after updating the go-kafka-alert-production we can use to trigger configuration reload</span></p><p><strong>3. Configuration Format Support</strong></p><p>Formats supported by Spring Cloud Config are <code class="language-plaintext highlighter-rouge">JSON</code>, <code class="language-plaintext highlighter-rouge">YML</code> and Java <code class="language-plaintext highlighter-rouge">properties</code>. The addded advantage of Spring Cloud Config is any configuration file served as either format can be accessed in all available formats. For example a config file that’s served as <code class="language-plaintext highlighter-rouge">application-message-summary-uat.properties</code> can be accessed by using <code class="language-plaintext highlighter-rouge">application-message-summary-uat.properties</code> or <code class="language-plaintext highlighter-rouge">application-message-summary-uat.json</code> or <code class="language-plaintext highlighter-rouge">application-message-summary-uat.yml</code>.</p><p>In the <a href="https://github.com/malike/centralized-configuration.git">sample configurations</a> there’s a <code class="language-plaintext highlighter-rouge">yml</code> configuration</p><p>Configuration files can be loaded from the file system or git with a simple configuration or relational databases with extra configuration and db setup.</p><p>this for file system</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>spring.cloud.config.server.git.uri=${HOME}/Desktop/config
</pre></table></code></div></div><p>or this for git</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>spring.cloud.config.server.git.uri=https://github.com/malike/centralized-configuration.git
</pre></table></code></div></div><p><strong>4. HTTP Support For Retrieving Configurations</strong></p><p>Although Spring Cloud Config is a java based application it can work with a variety of languages due to it’s HTTP API.</p>http://localhost:8888/{application}/{profile}[/{label} </br> http://localhost:8888/{application}-{profile}.{yml|json|properties}</br> http://localhost:8888/{label}/{application}-{profile}.{yml|json|properties}</br> http://localhost:8888/{application}-{profile}.{yml|json|properties}</br> http://localhost:8888/{label}/{application}-{profile}.{yml|json|properties}</br></br><p><em>NB: Base url is http://localhost:8888 because thats the <a href="https://github.com/malike/centralized-configuration-mangement/blob/master/config-server/src/main/resources/application.yml">configuration</a> in our config server</em></p><p>For our sample app, with configuration names <code class="language-plaintext highlighter-rouge">message-summary</code> and <code class="language-plaintext highlighter-rouge">go-kafka-alert</code> we’ll create config files with profiles for <code class="language-plaintext highlighter-rouge">uat</code> and <code class="language-plaintext highlighter-rouge">production</code> as <code class="language-plaintext highlighter-rouge">message-summary-production.properties</code> or <code class="language-plaintext highlighter-rouge">message-summary-uat.properties</code>. As I mentioned earlier the format doesn’t really matter once it’s supported we can access with with any extension meaning we can access our <code class="language-plaintext highlighter-rouge">yml</code> configuration files as <code class="language-plaintext highlighter-rouge">json</code> or <code class="language-plaintext highlighter-rouge">properties</code>.</p><p><strong>5. Security</strong></p><p>Spring Boot/Cloud apps can be secured simple by adding <code class="language-plaintext highlighter-rouge">spring-boot-starter-security</code> and with the <a href="https://spring.io/guides/gs/securing-web/">right configuration</a> we can enable basic authentication for the Config Server.</p><p>We can also take it a step further to restrict passwords and sensitive data in the configuration. This would prevent anyone who has access to the configuration files from seeing our database credentials in plain text. Spring Cloud Config supports encrypting and decrypting properties. You can read more <a href="https://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html#_encryption_and_decryption">here</a> This would require you to install Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy File which is not part of the JVM by default. By pre-pending passwords and sensitive properties with <code class="language-plaintext highlighter-rouge">{cipher}</code> and in quotes. Sensitive properties would be encrypted in git but would be decrypted on requests by services. Spring Cloud Config also comes with two end points to help in encrypting and decrypting properties.</p><p>To enable <a href="https://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html#_creating_a_key_store_for_testing">creating your key</a> and <a href="https://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html#_key_management">adding it to your config server</a>.</p><p>There many pros and cons of using Spring Cloud Config, I think I’ve highlighted the pros a lot in this post but some of the major cons associated with this the Config Server becoming an app on it’s own that needs to be managed and monitored like the microservices or distributed systems are not already enough and the fact that it going down can force services to either not start or or rely on fallback configurations but then again these same points maybe seen as pros in other infrastructures. I do hope though that you’ve understood how to use Spring Cloud Config to serve configurations in a microservice or distributed system.</p><blockquote><p>Check out codes on <a href="https://github.com/malike/centralized-configuration-mangement.git">github</a> and configuration files also <a href="https://github.com/malike/centralized-configuration.git">here</a></p></blockquote><p><br /> <br /> <strong>REFERENCES</strong></p><p><a href="https://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html">https://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/distributed/'>distributed</a>, <a href='/categories/sre/'>sre</a>, <a href='/categories/foss/'>foss</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/distributed/" class="post-tag no-text-decoration" >distributed</a> <a href="/tags/configuration/" class="post-tag no-text-decoration" >configuration</a> <a href="/tags/zookeeper/" class="post-tag no-text-decoration" >zookeeper</a> <a href="/tags/elasticsearch/" class="post-tag no-text-decoration" >elasticsearch</a> <a href="/tags/microservice/" class="post-tag no-text-decoration" >microservice</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Configuration+Management+for+Microservices+-+Malike+St&url=%2Fposts%2FConfiguration-Management-For-Microservices-And-Distributed-Systems%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Configuration+Management+for+Microservices+-+Malike+St&u=%2Fposts%2FConfiguration-Management-For-Microservices-And-Distributed-Systems%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FConfiguration-Management-For-Microservices-And-Distributed-Systems%2F&text=Configuration+Management+for+Microservices+-+Malike+St" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Predicting-Customer-Purchases-Beginners-Guide/">Predicting Customer Purchases: A Beginner's Guide to E-Commerce Data Science</a><li><a href="/posts/Obersevability-Stack-with-Grafana-Loki-And-Tempo/">Observability Stack with Grafana Loki Tempo and Prometheus</a><li><a href="/posts/Apache-Kafka-On-Kubernetes-Strimzi-Operator/">Apache Kafka on Kubernetes with Strimzi Operator</a><li><a href="/posts/Annotations+Spring=Awesome/">Java Annotations + Spring = Awesome</a><li><a href="/posts/Lambda-Architecture-RT/">Lambda Architecture With Kafka, ElasticSearch, Apache Storm and MongoDB</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Distributed-Tracing-With-Spring-Cloud-Sleuth-And-Opencensus/"><div class="card-body"> <em class="small" data-ts="1523224800" data-df="ll" > Apr 9, 2018 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Distributed Tracing with Spring Cloud Sleuth and Opencensus</h3><div class="text-muted small"><p> 1. What’s Distributed Tracing? Assume you’ve designed your application using a microservice architecture and for a feature like signup you have: a. service that creates the user in the database,...</p></div></div></a></div><div class="card"> <a href="/posts/CI-CD-AWS-Infrastructure-For-Kubernetes-Cluster-Using-CloudFormation/"><div class="card-body"> <em class="small" data-ts="1548975600" data-df="ll" > Feb 1, 2019 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Continuous Integration, continuous Deployment with AWS Using EKS, CodeBuild, CodePipeline, ECR and CloudFormation</h3><div class="text-muted small"><p> Building up on our previous article, where a simple cloud native/ distributed system application was built to run on kubernetes using Travis CI, DockerHub locally. What if we move this infrastructu...</p></div></div></a></div><div class="card"> <a href="/posts/K8s-101-And-Istio-Service-Mesh/"><div class="card-body"> <em class="small" data-ts="1539208800" data-df="ll" > Oct 11, 2018 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Beginning Kubernetes and Istio Service Mesh for Cloud Native/Distributed Systems</h3><div class="text-muted small"><p> 1. Kubernetes [K8S] The Processes factor of 12 factors which means having stateless services, that can be easily scaled by deploying multiple instances of the same service. Deploying and managemen...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Distributed-Tracing-With-Spring-Cloud-Sleuth-And-Opencensus/" class="btn btn-outline-primary" prompt="Older"><p>Distributed Tracing with Spring Cloud Sleuth and Opencensus</p></a> <a href="/posts/OLAP-Cube-With-Elasticsearch/" class="btn btn-outline-primary" prompt="Newer"><p>Using Elasticsearch as an OLAP Cube</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/malike_st">Malike St</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-66835539-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-66835539-1'); }); </script>
