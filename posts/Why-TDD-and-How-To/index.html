<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Why TDD and How To With Fluentlenium, RestAssured, HamCrest and Mockito" /><meta name="author" content="Malike St Lewis" /><meta property="og:locale" content="en" /><meta name="description" content="1. What’s TDD?" /><meta property="og:description" content="1. What’s TDD?" /><link rel="canonical" href="/posts/Why-TDD-and-How-To/" /><meta property="og:url" content="/posts/Why-TDD-and-How-To/" /><meta property="og:site_name" content="Malike St" /><meta property="og:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert_tdd.gif" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-05-07T00:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert_tdd.gif" /><meta property="twitter:title" content="Why TDD and How To With Fluentlenium, RestAssured, HamCrest and Mockito" /><meta name="twitter:site" content="@malike_st" /><meta name="twitter:creator" content="@malike_st" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Malike St Lewis","url":"https://github.com/malike/"},"dateModified":"2022-09-16T20:31:41+02:00","datePublished":"2017-05-07T00:00:00+02:00","description":"1. What’s TDD?","headline":"Why TDD and How To With Fluentlenium, RestAssured, HamCrest and Mockito","image":{"width":800,"height":500,"url":"/posts/dilbert_tdd.gif","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"/posts/Why-TDD-and-How-To/"},"url":"/posts/Why-TDD-and-How-To/"}</script><title>Why TDD and How To With Fluentlenium, RestAssured, HamCrest and Mockito | Malike St</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Malike St"><meta name="application-name" content="Malike St"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/malike/malike-media/main/common/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Malike St</a></div><div class="site-subtitle font-italic">Tech & stuff</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/sre/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SRE</span> </a><li class="nav-item"> <a href="/distributed/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>DISTRIBUTED SYSTEMS</span> </a><li class="nav-item"> <a href="/electronics/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ELECTRONICS</span> </a><li class="nav-item"> <a href="/oss/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>OS PROJECTS I STARTED</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/malike" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://gitlab.com/malike" aria-label="gitlab" target="_blank" rel="noopener"> <i class="fab fa-gitlab"></i> </a> <a href="https://twitter.com/malike_st" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['st.malike','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Why TDD and How To With Fluentlenium, RestAssured, HamCrest and Mockito</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Why TDD and How To With Fluentlenium, RestAssured, HamCrest and Mockito</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1494108000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 7, 2017 </em> </span> <span> Updated <em class="" data-ts="1663353101" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 16, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/dilbert_tdd.gif" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/malike/">Malike St Lewis</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1437 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><h3 id="1-whats-tdd"><span class="mr-2">1. What’s TDD?</span><a href="#1-whats-tdd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>It stands for <a href="http://www.jamesshore.com/Agile-Book/test_driven_development.html">Test Driven Development</a>. Simply meaning the Test Drives the Development(Coding). This is done in small parts and starts with writing a test for a feature.</p><p>This involves a cycle of this 3 steps in small parts.</p><p><strong><em>a. <span style="color:#EF5350">Red Bar (Fail)</span>: Code for specification that fails.</em></strong></p><p><strong><em>b. <span style="color:#4caf50">Green Bar(Pass)</span> : Code and test enough to make sure specification passes.</em></strong></p><p><strong><em>c. Refactor, Retest (Cleanup)</em></strong></p><p>Note that the order matters. If step 2 comes before step 1. It’s not TDD.</p><p>### 2. Why you should</p><strong><em>a. The next dev : “if small is good, then smaller must be better” - <a href="http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882">Bob Martin</a></em></strong><p>Sometimes we tend to get locked in and code the specs away with just the end user in mind. One very important person we forget is the next dev. The next developer or engineer who is going to modify code.</p><p>Unit Testing in TDD <em>forces</em> devs to break spaghetti code into smaller units. The fact is every good developer should know how to break any service into units and not write codes over a certain number of lines. Its not something that comes just with TDD. Sticking to TDD’s guidelines enforces you to break spaghetti into smaller units.</p><strong><em>b. Faster test cycles</em></strong><p>I wasn’t always on the TDD train. It felt rather long and unit testing (a central part of TDD ) doesn’t really reflect how the end user interacts with the product. So I placed high priorities on end-to-end tests and integration tests using this cycle:</p><p><strong><em>a. Code for production</em></strong></p><p><strong><em>b. Test your end points or APIs (Integration test).</em></strong></p><p><strong><em>c. Perform an end to end after putting the whole application together.</em></strong></p><p>The problem with this flow is I relied a lot on integration and end to end tests. Which are generally slow. For example an end to end test of an end user updating their profile page would be blocked if the login end to end test fails. Testers would have to wait till the login works perfectly before moving on to test the profile update. Some of the bugs that only show up during end to end tests could have being discovered during unit test.</p><p>In summary, unit tests help to discover bugs just faster than integration tests, they also help to isolate bugs and are far more reliable to help devs discover bugs before end to end tests.</p><p><strong><em>c. Discover <a href="https://en.wikipedia.org/wiki/Software_regression">Regression Errors</a> Faster</em></strong></p><p><em>“A software regression is a software bug which makes a feature stop functioning as intended after a certain event (for example, a system upgrade, system patching or a change to daylight saving time)”</em></p><p>Once you start refactoring your code for a feature, another service that depends on your newly refactored service would either fail or pass. TDD would help you reduce regression errors. Once a test that used to pass starts to fail you know you have to fix before pushing to production.</p><strong><em>d. Confidence</em></strong><p>Overall confidence your deliverable increases. The specification doesn’t just work on your machine but works Production,UAT and any other dev’s machine.</p><p>Well, there will still be bugs but not as much as with TDD.</p><h3 id="3-a-sample-tdd-project"><span class="mr-2">3. A Sample TDD Project</span><a href="#3-a-sample-tdd-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Using Spring Boot,let’s build a sample project using TDD principles. The project would be a simple application to help users signup. The dependencies needed for testing are listed below.</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre>    <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.fluentlenium<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>fluentlenium-core<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.10.9<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.fluentlenium<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>fluentlenium-assertj<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.10.9<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.jayway.restassured<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-mock-mvc<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;type&gt;</span>jar<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.hamcrest<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>hamcrest-core<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.3<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.mockito<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>mockito-core<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
</pre></table></code></div></div><p>What the dependencies give us?</p><p>1. <a href="http://fluentlenium.org/docs/">Fluentlenium</a>. <em>“FluentLenium helps you writing readable, reusable, reliable and resilient UI functional tests for the browser.”</em></p><p>2. <a href="http://rest-assured.io/">RestAssured</a> and <a href="http://hamcrest.org/">HamCrest</a> give us the opportunity to test rest service and validate.</p><p>3. <a href="http://site.mockito.org/">Mockito</a> <em>“Mockito is used to mock interfaces so that a dummy functionality can be added to a mock interface that can be used in unit testing. This tutorial should help you learn how to create unit tests with Mockito as well as how to use its APIs in a simple and intuitive way…“</em></p><p>Let’s start</p><p>We can break down the project in 2 parts. <br /><br /> i. Frontend <br /> ii. HTTP API to process the request from the frontend.<br /></p><ol><li><p>Create a spring boot project with thymeleaf and h2 dependencies.</p><li><p>Write the first functional test for the signup page.</p></ol><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>	<span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringJUnit4ClassRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="nd">@SpringApplicationConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="nc">AppMain</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="nd">@WebAppConfiguration</span>
	<span class="nd">@IntegrationTest</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"server.port:9000"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SignupControllerUITest</span> <span class="kd">extends</span> <span class="nc">FluentTest</span><span class="o">{</span>

		<span class="kd">public</span> <span class="nc">WebDriver</span> <span class="n">webDriver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FirefoxDriver</span><span class="o">();</span>
</pre></table></code></div></div><p>The <em>webDriver</em> is what Fluentlenium uses to browse natively as a user would. The <em>FireFoxDriver</em> options works fine because it comes as default. Our current setup requires FireFox 38. I won’t advice using the ChromeDriver unless you can ship the driver based on OS with your code and switch based on the other developers you work with. AFAIK It requires you set a path to the <em>ChromeDriver</em> which doesn’t make the code developer friendly.</p><p>Another option is the <em>HtmlUnitDriver</em>. However it won’t open the browser natively but it would also test the page.</p><ol><li>Lets create our first test : <em>Can I see the signup page?</em></ol><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testViewSignupPage</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
	    <span class="n">goTo</span><span class="o">(</span><span class="s">"http://localhost:9000/signup"</span><span class="o">);</span>
	    <span class="nc">FluentLeniumAssertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span><span class="n">find</span><span class="o">(</span><span class="s">".header"</span><span class="o">)).</span><span class="na">hasText</span><span class="o">(</span><span class="s">"Signup"</span><span class="o">);</span>
	<span class="o">}</span>
</pre></table></code></div></div><p>This would obviously fail because we don’t have the signup page. So we fix it by creating our signup page. So our test would pass.</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/first_red.png" alt="_config.yml" data-proofer-ignore></p><p>To fix this, we’ll create a controller for our signup page</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/signup"</span><span class="o">,</span><span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">signup</span><span class="o">()</span> <span class="o">{</span>
	    <span class="k">return</span> <span class="s">"signup"</span><span class="o">;</span>
	<span class="o">}</span>
</pre></table></code></div></div><p>Test, let it fail then create the view for our signup page in <em>“/resources/template”</em>. This is based on the default config for thymeleaf We’ll make sure we have an element the css selector <em>“.header”</em> and has text <em>“Signup”</em> to pass our test.</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/first_green.png" alt="_config.yml" data-proofer-ignore>.</p><p>Next we would like to create a form for our signup page. So we create a test that checks our signup page for the form. This would fail. We would move on to create the signup page to pass that test.</p><p>Once passed,we’ll create a test that fills our signup form and submits.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>	<span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">"SUCCESS: "</span><span class="o">+</span><span class="no">USERNAME</span><span class="o">+</span><span class="s">" saved."</span><span class="o">,</span><span class="n">webDriver</span><span class="o">.</span><span class="na">switchTo</span><span class="o">().</span><span class="na">alert</span><span class="o">().</span><span class="na">getText</span><span class="o">());</span>
</pre></table></code></div></div><p>This would give us another failure because we are yet to code our signup page to show any alert although our test expects an alert. After adding the jquery code to submit the form details to our HTTP API_ with the help of an alert we can know whether it works or not.</p><p>Note that <a href="http://fluentlenium.org/docs/">Fluentlenium</a> offers lots of locators you can use to validate as well.</p><p>After refactoring our code in the view to show a success alert or failure alert we are one step close since we don’t get this exception</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>org.openqa.selenium.NoAlertPresentException: No alert is present (WARNING: The server did not provide any stacktrace information)
</pre></table></code></div></div><p>but this</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>org.junit.ComparisonFailure:
Expected :SUCCESS : malike saved.
Actual   :ERROR:405
</pre></table></code></div></div><p>We refactor to fix this as well. We fix this red by creating the api for saving user data. We create a test for our signup HTTP API in the SignupControllerTest to first return 200.</p><p>Then another test to confirm your details get saved once the parameters are passed to the api. This failing test would require us to create a UserServiceTest class.</p><p>We continue with this cycle of creating a test,which would fail,refactor till its passes. Then we move on to the next specification.</p><p>Check out the <a href="https://github.com/malike/spring-boot-tdd">source code</a>. The test cases for the the signup page can be found <a href="https://github.com/malike/spring-boot-tdd/blob/master/src/test/java/st/malike/spring/boot/tdd/http/SignupControllerUITest.java">here</a> and the test cases for the api <a href="https://github.com/malike/spring-boot-tdd/blob/master/src/test/java/st/malike/spring/boot/tdd/http/SignupControllerTest.java">here</a> and the tests for our UserServiceTest <a href="https://github.com/malike/spring-boot-tdd/blob/master/src/test/java/st/malike/spring/boot/tdd/service/UserServiceTest.java">here</a>.</p><p>The <a href="https://github.com/malike/spring-boot-tdd/blob/master/src/test/java/st/malike/spring/boot/tdd/http/SignupControllerUITest.java">Frontend</a> test uses <a href="http://fluentlenium.org/docs/">Fluentlenium</a> to help us use the browser natively as our end user would. <br /> The <a href="https://github.com/malike/spring-boot-tdd/blob/master/src/test/java/st/malike/spring/boot/tdd/http/SignupControllerTest.java">Controller</a> test uses RestAssured to test our HTTP endpoint and HamCrest to help us validate the response.<br /> The <a href="https://github.com/malike/spring-boot-tdd/blob/master/src/test/java/st/malike/spring/boot/tdd/service/UserServiceTest.java">UserService</a> test uses Mockito to help us mock UserService and all the services it depends on,which in our case is just UserRepository. <br /></p><p>You can see that although the Frontend,the SignUpController and the UserService tests are different they follow the same TDD guidelines. Breaking into bits and writing the tests before the feature and refactoring till the pass.</p><p>Although a bit limited in features,with this example we’ve been able to create test cases to test our frontend using <a href="http://fluentlenium.org/docs/">Fluentlenium</a> and also using Mockito,RestAssured and HamCrest test our service and HTTP API.</p><p>After 12 test cases,all green, we’ve built a signup feature using TDD.</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/all_green.png" alt="_config.yml" data-proofer-ignore>.</p><p><br /> <br /></p><blockquote><p>Our sample project can be found <a href="https://github.com/malike/spring-boot-tdd">here</a></p></blockquote><p><br /> <br /> <strong>REFERENCES</strong></p><p><a href="http://www.jamesshore.com/Agile-Book/test_driven_development.html">http://www.jamesshore.com/Agile-Book/test_driven_development.html</a> <a href="https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html">https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tech/'>tech</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/tdd/" class="post-tag no-text-decoration" >tdd</a> <a href="/tags/test/" class="post-tag no-text-decoration" >test</a> <a href="/tags/test-driven-development/" class="post-tag no-text-decoration" >test-driven-development</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Why+TDD+and+How+To+With+Fluentlenium%2C+RestAssured%2C+HamCrest+and+Mockito+-+Malike+St&url=%2Fposts%2FWhy-TDD-and-How-To%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Why+TDD+and+How+To+With+Fluentlenium%2C+RestAssured%2C+HamCrest+and+Mockito+-+Malike+St&u=%2Fposts%2FWhy-TDD-and-How-To%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FWhy-TDD-and-How-To%2F&text=Why+TDD+and+How+To+With+Fluentlenium%2C+RestAssured%2C+HamCrest+and+Mockito+-+Malike+St" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Predicting-Customer-Purchases-Beginners-Guide/">Predicting Customer Purchases: A Beginner's Guide to E-Commerce Data Science</a><li><a href="/posts/Obersevability-Stack-with-Grafana-Loki-And-Tempo/">Observability Stack with Grafana Loki Tempo and Prometheus</a><li><a href="/posts/Apache-Kafka-On-Kubernetes-Strimzi-Operator/">Apache Kafka on Kubernetes with Strimzi Operator</a><li><a href="/posts/Annotations+Spring=Awesome/">Java Annotations + Spring = Awesome</a><li><a href="/posts/Lambda-Architecture-RT/">Lambda Architecture With Kafka, ElasticSearch, Apache Storm and MongoDB</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Annotations+Spring=Awesome/"><div class="card-body"> <em class="small" data-ts="1440194400" data-df="ll" > Aug 22, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java Annotations + Spring = Awesome</h3><div class="text-muted small"><p> Java Annotations are really cool. They give this feature to send extra information that can be used during runtime and/or compile time. I don’t need to talk about Spring here. I personally think i...</p></div></div></a></div><div class="card"> <a href="/posts/Spring-Metrics/"><div class="card-body"> <em class="small" data-ts="1440453600" data-df="ll" > Aug 25, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spring Metrics For Simple Event Monitoring</h3><div class="text-muted small"><p> Sometimes (or all the time) you would want to know whats happening in your application’s life cycle. Spring Boot Metrics is just the right tool for application metrics in any Spring Boot Applicatio...</p></div></div></a></div><div class="card"> <a href="/posts/Little-More-With-Spring-Metrics/"><div class="card-body"> <em class="small" data-ts="1455663600" data-df="ll" > Feb 17, 2016 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>... a little more with spring metrics</h3><div class="text-muted small"><p> If you read this, we talked about capturing and reading application metrics. In this post I’ll show you how to do a little more with that data using Spring Metrics and Lambda Architecture which we...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Queue-LinkedHashMap/" class="btn btn-outline-primary" prompt="Older"><p>Creating An In-Memory FIFO Cache</p></a> <a href="/posts/Elasticsearch-Report-Engine/" class="btn btn-outline-primary" prompt="Newer"><p>Elasticsearch Report Engine</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/malike_st">Malike St</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-66835539-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-66835539-1'); }); </script>
