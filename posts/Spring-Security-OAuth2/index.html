<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Using Spring Security OAuth 2.0 and MongoDB to secure a Microservice/SOA System" /><meta name="author" content="Malike St Lewis" /><meta property="og:locale" content="en" /><meta name="description" content="Before we go straight to the how-to and codes. I’d like to take a minute to explain my choice in using Spring Security OAuth2.0 and MongoDB to develop a Single Sign On Authentication Server." /><meta property="og:description" content="Before we go straight to the how-to and codes. I’d like to take a minute to explain my choice in using Spring Security OAuth2.0 and MongoDB to develop a Single Sign On Authentication Server." /><link rel="canonical" href="/posts/Spring-Security-OAuth2/" /><meta property="og:url" content="/posts/Spring-Security-OAuth2/" /><meta property="og:site_name" content="Malike St" /><meta property="og:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/security_question.png" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2015-08-24T00:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://raw.githubusercontent.com/malike/malike-media/main/posts/security_question.png" /><meta property="twitter:title" content="Using Spring Security OAuth 2.0 and MongoDB to secure a Microservice/SOA System" /><meta name="twitter:site" content="@malike_st" /><meta name="twitter:creator" content="@malike_st" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Malike St Lewis","url":"https://github.com/malike/"},"dateModified":"2022-09-16T20:31:41+02:00","datePublished":"2015-08-24T00:00:00+02:00","description":"Before we go straight to the how-to and codes. I’d like to take a minute to explain my choice in using Spring Security OAuth2.0 and MongoDB to develop a Single Sign On Authentication Server.","headline":"Using Spring Security OAuth 2.0 and MongoDB to secure a Microservice/SOA System","image":{"width":800,"height":500,"url":"/posts/security_question.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"/posts/Spring-Security-OAuth2/"},"url":"/posts/Spring-Security-OAuth2/"}</script><title>Using Spring Security OAuth 2.0 and MongoDB to secure a Microservice/SOA System | Malike St</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Malike St"><meta name="application-name" content="Malike St"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/malike/malike-media/main/common/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Malike St</a></div><div class="site-subtitle font-italic">Tech & stuff</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/sre/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SRE</span> </a><li class="nav-item"> <a href="/distributed/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>DISTRIBUTED SYSTEMS</span> </a><li class="nav-item"> <a href="/electronics/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ELECTRONICS</span> </a><li class="nav-item"> <a href="/oss/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>OS PROJECTS I STARTED</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/malike" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://gitlab.com/malike" aria-label="gitlab" target="_blank" rel="noopener"> <i class="fab fa-gitlab"></i> </a> <a href="https://twitter.com/malike_st" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['st.malike','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Using Spring Security OAuth 2.0 and MongoDB to secure a Microservice/SOA System</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Using Spring Security OAuth 2.0 and MongoDB to secure a Microservice/SOA System</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1440367200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 24, 2015 </em> </span> <span> Updated <em class="" data-ts="1663353101" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 16, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/security_question.png" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/malike/">Malike St Lewis</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1465 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><p>Before we go straight to the <em>how-to</em> and codes. I’d like to take a minute to explain my choice in using <a href="http://projects.spring.io/spring-security-oauth/docs/oauth2.html">Spring Security OAuth2.0</a> and <a href="https://www.mongodb.org">MongoDB</a> to develop a <strong><em>Single Sign On Authentication Server</em></strong>.</p><p>With every microservice architecture,there would obviously different services working together. Unlike the macro or fat -war or fat -jar architecture, managing authentication and authorization is not the same. Because assuming you have two microservice working together to delivery a service. It is would be a bad idea to replicate authentication and authorization for both microservices independently. Now that we are both on the same page that replicating authentication and authorization for all microservices is <em>really ..erm.</em></p><p>We both know we need to have a centralized authentication system where a user authenticates and is authorized on one system, her privileges are recognized throughout all other microservices in the architecture.</p><p>Let’s talk a bit about <strong>RESTful services</strong>, <strong>Stateless Sessions</strong> and <strong>Stateful Sessions</strong>.</p><p>To access any content on a server <strong>3</strong> things are required to be done</p><ol><li><strong>Authentication</strong> - <em>Verify user identity</em><li><strong>Authorization</strong> - <em>Is she supposed to have access to that?</em><li><strong>Session Management</strong> - <em>I know who you are and you have access for this time</em></ol><p>In any RESTful system, Number 3. is not encouraged. <em>Why?</em> It would mean that to get things working we would need to authenticate the user for every RESTful request. This is not good. Assuming I have a huge user database it would be worse.</p><p>The best next fit is to give the user a token once authenticated and this can be used for subsequent requests. Token would be managed separately from the users. Expired tokens deleted(To keep token storage small). This means that on a less busy day we would have just <strong>1</strong> token stored and <strong>(user size ) == token size</strong> on our busiest day. Compared to having same <strong>(user size)</strong> for the busiest and less busy days,this is much better.</p><p>But in <strong>THEORY</strong>, RESTful systems should be <strong>STATELESS</strong>.</p><p><strong>What’s Stateless and Stateful Sessions?</strong></p><p><strong>STATELESS SESSIONS</strong></p><p><em>“In computing, a stateless protocol is a communications protocol that treats each request as an independent transaction that is unrelated to any previous request so that the communication consists of independent pairs of request and response. A stateless protocol does not require the server to retain session information or status about each communications partner for the duration of multiple requests. In contrast, a protocol which requires keeping of the internal state on the server is known as a stateful protocol.”</em></p><p><strong>STATEFUL SESSIONS</strong></p><p>Exact opposite of Stateless.</p><p>But practically it would be impossible to use a <em>“pure”</em> stateless session management for RESTful services by the RESTful standard without having performance issues.</p><p>For a frontend applications(<em>eg: AngularJS or Polymer</em>) once it does not keep tokens in cookies,to prevent <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">Cross Site Request Forgery [CSRF or XSRF]</a>. And with the rise of <em>“MOBILE FIRST”</em> systems,this would be a problem because mobile apps don’t play well with <strong>COOKIE</strong>s.</p><p><img data-src="https://raw.githubusercontent.com/malike/malike-media/main/posts/tumblr_nhvyfbefec1qlwkdio1_500-1431380291.gif" alt="_config.yml" data-proofer-ignore></p><p>For backend application storing the token would be quite easy. Since there are lots of options for this. <a href="https://www.mongodb.org">MongoDB</a> and <a href="https://redis.io">Redis</a> are very good candidates.</p><p>If the cookie approach is not <strong>“ok”</strong> for frontend applications how do we store tokens <em>then?</em></p><p><a href="http://www.w3schools.com/html/html5_webstorage.asp">HTML5</a> comes with <strong><em>localStorage</em></strong> and <strong><em>sessionStorage</em></strong>.</p><p><em>“With local storage, web applications can store data locally within the user’s browser. Before HTML5, application data had to be stored in cookies, included in every server request. Local storage is more secure, and large amounts of data can be stored locally, without affecting website performance. Unlike cookies, the storage limit is far larger (at least 5MB) and information is never transferred to the server. Local storage is per origin (per domain and protocol). All pages, from one origin, can store and access the same data.”</em></p><p>The main difference between the two is…</p><p><em>“The sessionStorage object is equal to the localStorage object, except that it stores the data for only one session”</em></p><p>Although SessionStorage is not supported in many browsers. You can get <strong><em>localStorage</em></strong> working as <strong><em>sessionStorage</em></strong> with some extra js codes or just use polyfill to provide this functionality in unsupported browsers.</p><p>You can then pick tokens from the <strong><em>sessionStorage</em></strong> (or <strong><em>localStorage</em></strong> ) and send as HTTP headers.</p><p>Now that we have clear idea on how our <strong><em>Single Sign On Authentication Server</em></strong> should work,both backend and frontend(and a little about mobile) considered let me introduce you to <a href="https://tools.ietf.org/html/rfc6749">OAuth2.0</a>.</p><p>Whats <strong><em><a href="https://tools.ietf.org/html/rfc6749">OAuth2.0</a>?</em></strong></p><p><em>“The OAuth 2.0 authorization framework enables a third-party application to obtain limited access to an HTTP service, either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP service, or by allowing the third-party application to obtain access on its own behalf.”</em></p><p>Fortunately it supports what we want our authentication server should achieve (plus more features) A quick search online would let you know <a href="https://developers.google.com/identity/protocols/OAuth2">Google</a>,<a href="https://developers.facebook.com/docs/facebook-login/access-tokens">Facebook</a>,<a href="https://msdn.microsoft.com/en-us/library/hh243647.aspx">Windows Live</a>,<a href="https://developer.github.com/v3/oauth">GitHub</a>,<a href="https://api.slack.com/docs/oauth">Slack</a>,<a href="https://www.dropbox.com/developers/reference/oauthguide">Dropbox</a> and <a href="http://oauth.net/2/">many more</a> are already using it.<br /> They using it doesn’t make it <em>perfect</em>,it just means we are using them as guinea pigs. :D.</p><p><strong><em>Short Summary about <a href="http://oauth.net/2/">OAuth 2.0</a></em></strong></p><p><em>“The first step of OAuth 2 is to get authorization from the user. For browser-based or mobile apps, this is usually accomplished by displaying an interface provided by the service to the user</em>.</p><p><em>OAuth 2 provides several “grant types” for different use cases. The grant types defined are:</em></p><ol><li><strong><em>Authorization Code</em></strong> for apps running on a web server<li><strong><em>Implicit</em></strong> for browser-based or mobile apps<li><strong><em>Password</em></strong> for logging in with a username and password<li><strong><em>Client credentials</em></strong> for application access</ol><p>With these grant types we can authenticate and authorize users as well clients(which is microservice in our case).</p><p><br /> <em>I have to add this disclaimer here. For every framework,new technology whatevs I have/want to use. <a href="http://spring.io/">Spring</a> is my first go to client or integration.I mean it’s <a href="http://spring.io/">Spring</a>.</em> <br /></p><p><strong>Why <a href="http://projects.spring.io/spring-security-oauth/docs/oauth2.html">Spring Security OAuth2.0</a> ?</strong></p><p>Spring already has integration and support for LDAP(easy integration if your <strong><em>Single Sign On Authentication Server</em></strong> is an enterprise solution),Social platforms and Databases.</p><p>The real question is</p><p><strong><em>WHY NOT <a href="http://projects.spring.io/spring-security-oauth/docs/oauth2.html">Spring Security OAuth2.0</a>?</em></strong>.</p><p><br /></p><p><strong>Issues with <a href="http://projects.spring.io/spring-security-oauth/docs/oauth2.html">Spring Security OAuth2.0</a></strong></p><p>Spring Security OAuth 2.0 supports storing tokens in MySQL out of the box. With the abundance of NoSQL databases which Spring already supports it would be a <a href="https://spring.io/understanding/NoSQL">better option to integrate with one of them out of the box</a>.</p><p>But let me mention here that Spring Security OAuth 2.0 supports InMemoryTokenStore and JWT as well.</p><p><em>“The default InMemoryTokenStore is perfectly fine for a single server (i.e. low traffic and no hot swap to a backup server in the case of failure). Most projects can start here, and maybe operate this way in development mode, to make it easy to start a server with no dependencies.</em></p><p><em>The JdbcTokenStore is the JDBC version of the same thing, which stores token data in a relational database. Use the JDBC version if you can share a database between servers, either scaled up instances of the same server if there is only one, or the Authorization and Resources Servers if there are multiple components. To use the JdbcTokenStore you need “spring-jdbc” on the classpath.</em></p><p><em>The JSON Web Token (JWT) version of the store encodes all the data about the grant into the token itself (so no back end store at all which is a significant advantage). One disadvantage is that you can’t easily revoke an access token, so they normally are granted with short expiry and the revocation is handled at the refresh token. Another disadvantage is that the tokens can get quite large if you are storing a lot of user credential information in them. The JwtTokenStore is not really a “store” in the sense that it doesn’t persist any data, but it plays the same role of translating between token values and authentication information in the DefaultTokenServices.”</em></p><p>But the good thing is you can implement the TokenStore class and persist your token in any database of your choice.</p><p>I chose MongoDB. I need to mention that were some issues with the MongoDB converter using this approach but it finally worked :)</p><h2 id="update"><span class="mr-2"><strong>Update</strong></span><a href="#update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>There are some <a href="http://stackoverflow.com/questions/36809721/spring-boot-resource-server-not-able-to-authorize-roles-with-oauth-2-access-toke">issues</a> with the project,if you use it as it is you would have problems with the <a href="http://docs.spring.io/autorepo/docs/spring-security/3.2.3.RELEASE/apidocs/org/springframework/security/config/annotation/web/builders/HttpSecurity.html">antMatchers</a></em> <em>They do not work when you have custom urls to be permitted. For example :</em> <em>If I wanted this url <strong><a href="">http://localhost:8080/donotauthenticate</a></strong> to be permitted with code below</em></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> <span class="n">http</span>
  <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
  <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/donotauthenticate"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
  <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">authenticated</span><span class="o">()</span>
</pre></table></code></div></div><p><em>You’ll see it doesn’t work when you using this, which I did in my case</em></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="nt">&lt;dependency&gt;</span>
	 <span class="nt">&lt;groupId&gt;</span>org.springframework.security.oauth<span class="nt">&lt;/groupId&gt;</span>
	 <span class="nt">&lt;artifactId&gt;</span>spring-security-oauth2<span class="nt">&lt;/artifactId&gt;</span>
	 <span class="nt">&lt;version&gt;</span>2.0.1.RELEASE<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
</pre></table></code></div></div><p><em>Changing it to this version fixed the issue.</em></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="nt">&lt;dependency&gt;</span>
 	<span class="nt">&lt;groupId&gt;</span>org.springframework.security.oauth<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>spring-security-oauth2<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>2.0.7.RELEASE<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
</pre></table></code></div></div><p><em>I’ve not looked into <strong>exactly</strong> what the cause is to file an issue. Anyone who does before me can comment</em></p><blockquote><p>Now that we done talking about our choices. <a href="https://github.com/malike/sso-auth">Lets move on to coding this.</a><br /></p></blockquote><p><br /> <br /> <strong>References</strong></p><p><a href="https://speakerdeck.com/dsyer/security-for-microservices-with-spring">https://speakerdeck.com/dsyer/security-for-microservices-with-spring</a> - Dave Syer</p><p><a href="https://aaronparecki.com/articles/2012/07/29/1/oauth2-simplified">https://aaronparecki.com/articles/2012/07/29/1/oauth2-simplified</a> - Aaron Parecki</p><p><a href="http://www.w3schools.com/html/html5_webstorage.asp">http://www.w3schools.com/html/html5_webstorage.asp</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/distributed/'>distributed</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/documentation/" class="post-tag no-text-decoration" >documentation</a> <a href="/tags/sample/" class="post-tag no-text-decoration" >sample</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Using+Spring+Security+OAuth+2.0+and+MongoDB+to+secure+a+Microservice%2FSOA++System+-+Malike+St&url=%2Fposts%2FSpring-Security-OAuth2%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Using+Spring+Security+OAuth+2.0+and+MongoDB+to+secure+a+Microservice%2FSOA++System+-+Malike+St&u=%2Fposts%2FSpring-Security-OAuth2%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FSpring-Security-OAuth2%2F&text=Using+Spring+Security+OAuth+2.0+and+MongoDB+to+secure+a+Microservice%2FSOA++System+-+Malike+St" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Predicting-Customer-Purchases-Beginners-Guide/">Predicting Customer Purchases: A Beginner's Guide to E-Commerce Data Science</a><li><a href="/posts/Obersevability-Stack-with-Grafana-Loki-And-Tempo/">Observability Stack with Grafana Loki Tempo and Prometheus</a><li><a href="/posts/Apache-Kafka-On-Kubernetes-Strimzi-Operator/">Apache Kafka on Kubernetes with Strimzi Operator</a><li><a href="/posts/Annotations+Spring=Awesome/">Java Annotations + Spring = Awesome</a><li><a href="/posts/Lambda-Architecture-RT/">Lambda Architecture With Kafka, ElasticSearch, Apache Storm and MongoDB</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Annotations+Spring=Awesome/"><div class="card-body"> <em class="small" data-ts="1440194400" data-df="ll" > Aug 22, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java Annotations + Spring = Awesome</h3><div class="text-muted small"><p> Java Annotations are really cool. They give this feature to send extra information that can be used during runtime and/or compile time. I don’t need to talk about Spring here. I personally think i...</p></div></div></a></div><div class="card"> <a href="/posts/Spring-Metrics/"><div class="card-body"> <em class="small" data-ts="1440453600" data-df="ll" > Aug 25, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spring Metrics For Simple Event Monitoring</h3><div class="text-muted small"><p> Sometimes (or all the time) you would want to know whats happening in your application’s life cycle. Spring Boot Metrics is just the right tool for application metrics in any Spring Boot Applicatio...</p></div></div></a></div><div class="card"> <a href="/posts/Mulitple-Spring-Data-MongoDB-Connections/"><div class="card-body"> <em class="small" data-ts="1444341600" data-df="ll" > Oct 9, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Multiple Spring Data MongoDB Connections</h3><div class="text-muted small"><p> Using Spring Data Starter MongoDB to connect to multiple MongoDB databases is quite easy. Its less complicated when you use just MongoTemplate for all your queries. But gets complicated when you us...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Lambda-Architecture-RT/" class="btn btn-outline-primary" prompt="Older"><p>Lambda Architecture With Kafka, ElasticSearch, Apache Storm and MongoDB</p></a> <a href="/posts/Spring-Metrics/" class="btn btn-outline-primary" prompt="Newer"><p>Spring Metrics For Simple Event Monitoring</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/malike_st">Malike St</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/sample/">sample</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/distributed/">distributed</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/microservice/">microservice</a> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-66835539-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-66835539-1'); }); </script>
